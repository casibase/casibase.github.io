"use strict";(self.webpackChunkcasibase_website=self.webpackChunkcasibase_website||[]).push([[7194],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>k});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(a),m=o,k=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return a?n.createElement(k,s(s({ref:t},c),{},{components:a})):n.createElement(k,s({ref:t},c))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:o,s[1]=i;for(var p=2;p<r;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7726:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var n=a(7462),o=(a(7294),a(3905));const r={title:"(Optionnel) Essayer avec Docker",description:"Essayer Casibase avec Docker",keywords:["Casibase","Docker"],authors:["hsluoyz"]},s=void 0,i={unversionedId:"basic/try-with-docker",id:"basic/try-with-docker",title:"(Optionnel) Essayer avec Docker",description:"Essayer Casibase avec Docker",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/basic/try-with-docker.md",sourceDirName:"basic",slug:"/basic/try-with-docker",permalink:"/fr/docs/basic/try-with-docker",draft:!1,editUrl:"https://github.com/casibase/casibase-website/edit/master/docs/basic/try-with-docker.md",tags:[],version:"current",frontMatter:{title:"(Optionnel) Essayer avec Docker",description:"Essayer Casibase avec Docker",keywords:["Casibase","Docker"],authors:["hsluoyz"]},sidebar:"tutorialSidebar",previous:{title:"Installation du serveur",permalink:"/fr/docs/basic/server-installation"},next:{title:"(Optional) Try with K8s Helm",permalink:"/fr/docs/basic/try-with-helm"}},l={},p=[{value:"Exigences",id:"exigences",level:2},{value:"Mat\xe9riel",id:"mat\xe9riel",level:3},{value:"Syst\xe8me d&#39;exploitation",id:"syst\xe8me-dexploitation",level:3},{value:"Docker",id:"docker",level:3},{value:"Obtenir les images",id:"obtenir-les-images",level:2},{value:"<strong>Option-1</strong> : Utiliser la base de donn\xe9es de test",id:"option-1--utiliser-la-base-de-donn\xe9es-de-test",level:3},{value:"<strong>Option-2</strong> : Essayer avec docker-compose",id:"option-2--essayer-avec-docker-compose",level:3},{value:"<strong>Option-3</strong> : Utiliser directement l&#39;image standard",id:"option-3--utiliser-directement-limage-standard",level:3}],c={toc:p},u="wrapper";function d(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"exigences"},"Exigences"),(0,o.kt)("h3",{id:"mat\xe9riel"},"Mat\xe9riel"),(0,o.kt)("p",null,"Si vous souhaitez construire l'image Docker vous-m\xeame, assurez-vous que votre machine dispose d'au moins ",(0,o.kt)("strong",{parentName:"p"},"2 Go")," de m\xe9moire. Le frontend de Casibase est un projet NPM bas\xe9 sur React. La construction du frontend n\xe9cessite au moins ",(0,o.kt)("strong",{parentName:"p"},"2 Go")," de m\xe9moire. Une m\xe9moire inf\xe9rieure \xe0 ",(0,o.kt)("strong",{parentName:"p"},"2 Go")," peut entra\xeener l'\xe9chec de la construction du frontend."),(0,o.kt)("p",null,"Si vous avez seulement besoin d'ex\xe9cuter l'image pr\xe9construite, assurez-vous que votre machine dispose d'au moins ",(0,o.kt)("strong",{parentName:"p"},"100 Mo")," de m\xe9moire."),(0,o.kt)("h3",{id:"syst\xe8me-dexploitation"},"Syst\xe8me d'exploitation"),(0,o.kt)("p",null,"Tous les syst\xe8mes d'exploitation (Linux, Windows et macOS) sont pris en charge."),(0,o.kt)("h3",{id:"docker"},"Docker"),(0,o.kt)("p",null,"Vous pouvez utiliser ",(0,o.kt)("strong",{parentName:"p"},"Docker (version docker-engine >= 17.05)")," sous Linux ou ",(0,o.kt)("strong",{parentName:"p"},"Docker Desktop")," sous Windows et macOS."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.docker.com/get-docker/"},"Docker"))),(0,o.kt)("p",null,"Quel que soit le syst\xe8me d'exploitation, les utilisateurs doivent s'assurer qu'ils disposent de la ",(0,o.kt)("strong",{parentName:"p"},"version docker-engine >= 17.05"),". C'est parce que nous utilisons la fonctionnalit\xe9 de construction multi-\xe9tapes dans docker-compose.yml, qui est prise en charge dans la version 17.05 et sup\xe9rieure. Pour plus d'informations, voir ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/develop/develop-images/multistage-build/"},"https://docs.docker.com/develop/develop-images/multistage-build/"),"."),(0,o.kt)("p",null,"Si vous utilisez docker-compose, assurez-vous d'avoir ",(0,o.kt)("strong",{parentName:"p"},"docker-compose version >= 2.2"),". Pour les utilisateurs Linux, notez que docker-compose doit \xeatre install\xe9 s\xe9par\xe9ment de docker-engine."),(0,o.kt)("h2",{id:"obtenir-les-images"},"Obtenir les images"),(0,o.kt)("p",null,"Nous fournissons deux images sur DockerHub :"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Nom"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Recommandation"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://hub.docker.com/r/casbin/casibase-all-in-one"},"casibase-all-in-one")),(0,o.kt)("td",{parentName:"tr",align:null},"L'image contient Casibase et la base de donn\xe9es MySQL"),(0,o.kt)("td",{parentName:"tr",align:null},"Cette image contient d\xe9j\xe0 une base de donn\xe9es de test et est uniquement destin\xe9e aux tests")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://hub.docker.com/r/casbin/casibase"},"casibase")),(0,o.kt)("td",{parentName:"tr",align:null},"L'image contient uniquement Casibase"),(0,o.kt)("td",{parentName:"tr",align:null},"Cette image peut se connecter \xe0 votre propre base de donn\xe9es et \xeatre utilis\xe9e en production")))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"casbin/casibase-all-in-one: cette image contient l'ex\xe9cutable casibase, une base de donn\xe9es MySQL et toutes les configurations n\xe9cessaires. Elle est con\xe7ue pour les nouveaux utilisateurs qui souhaitent essayer rapidement Casibase. Avec cette image, vous pouvez d\xe9marrer Casibase imm\xe9diatement avec seulement une ou deux commandes sans configuration complexe. Cependant, notez que nous ",(0,o.kt)("strong",{parentName:"li"},"ne recommandons pas")," d'utiliser cette image en production.")),(0,o.kt)("h3",{id:"option-1--utiliser-la-base-de-donn\xe9es-de-test"},(0,o.kt)("strong",{parentName:"h3"},"Option-1")," : Utiliser la base de donn\xe9es de test"),(0,o.kt)("p",null,"Ex\xe9cutez le conteneur en exposant le port ",(0,o.kt)("inlineCode",{parentName:"p"},"14000")," \xe0 l'h\xf4te. Si l'image n'existe pas sur l'h\xf4te local, elle sera automatiquement t\xe9l\xe9charg\xe9e."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -p 14000:14000 casbin/casibase-all-in-one\n")),(0,o.kt)("p",null,"Visitez ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:14000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:14000"))," dans votre navigateur. Connectez-vous au tableau de bord Casibase avec le compte administrateur global par d\xe9faut : ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n<b>123</b>\n")),(0,o.kt)("h3",{id:"option-2--essayer-avec-docker-compose"},(0,o.kt)("strong",{parentName:"h3"},"Option-2")," : Essayer avec docker-compose"),(0,o.kt)("p",null,"Cr\xe9ez un r\xe9pertoire ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf")," au m\xeame niveau de r\xe9pertoire que le fichier ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml"),". Ensuite, copiez ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casibase/casibase/blob/master/conf/app.conf"},"app.conf")," depuis Casibase. Pour plus de d\xe9tails sur ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf"),", vous pouvez consulter ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation#via-ini-file"},"Via le fichier Ini"),"."),(0,o.kt)("p",null,"Below is a minimal but complete ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," example that starts a MySQL database and the Casibase service. It configures Casibase to connect to the database using MySQL. Save this file as ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," (next to a ",(0,o.kt)("inlineCode",{parentName:"p"},"conf")," folder if you want to mount a custom ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  db:\n    image: mysql:8.0\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: 123456\n      MYSQL_DATABASE: casibase\n    volumes:\n      - db_data:/var/lib/mysql\n    ports:\n      - "3306:3306" # optional: expose DB to host\n\n  casibase:\n    image: casbin/casibase:latest\n    restart: unless-stopped\n    depends_on:\n      - db\n    environment:\n      # Use MySQL driver and point to the db service (service name = host)\n      - driverName=mysql\n      - dataSourceName=root:123456@tcp(db:3306)/\n    ports:\n      - "14000:14000"\n    volumes:\n      # optional: mount your configuration\n      - ./conf/app.conf:/conf/app.conf\n\nvolumes:\n  db_data:\n')),(0,o.kt)("p",null,"What does the above compose file do:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The Casibase container connects to the database using the Compose service name ",(0,o.kt)("inlineCode",{parentName:"li"},"db")," (i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"db:3306"),"). When both services run in the same Docker network (default for compose), using the service name as host is the simplest and most reliable approach."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"dataSourceName")," above uses the MySQL root account for simplicity. For production use please create a dedicated DB user and a strong password."),(0,o.kt)("li",{parentName:"ul"},"Mounting ",(0,o.kt)("inlineCode",{parentName:"li"},"./conf/app.conf")," into ",(0,o.kt)("inlineCode",{parentName:"li"},"/conf/app.conf")," is optional. If you prefer environment variables, you can remove the mount and rely on the ",(0,o.kt)("inlineCode",{parentName:"li"},"driverName")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"dataSourceName")," variables."),(0,o.kt)("li",{parentName:"ul"},"If both ",(0,o.kt)("inlineCode",{parentName:"li"},"app.conf")," and environment variables are provided, the environment variables take precedence and will override the corresponding settings in app.conf.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Casdoor"),": By default Casibase uses the hosted Casdoor instance at ",(0,o.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com")," for user authentication. If you need to manage users, applications, or customize the authentication flow, you must deploy your own Casdoor instance and update Casibase's ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf")," (or the equivalent environment variables) to point to your Casdoor server. You can look at ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/docs/basic/server-installation#configure-casdoor"},"Casdoor configuration"))," for more details."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"RUNNING_IN_DOCKER")),": By default ",(0,o.kt)("inlineCode",{parentName:"p"},"RUNNING_IN_DOCKER")," is enabled in docker image. When enabled, Casibase replaces ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost")," with the Docker bridge address (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"host.docker.internal")," or the equivalent bridge hostname) so that the container can reach services running on the host.")),(0,o.kt)("p",null,"Bring up the services:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n")),(0,o.kt)("p",null,"Check logs (follow):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs -f casibase\n")),(0,o.kt)("p",null,"Visitez ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:14000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:14000"))," dans votre navigateur. Connectez-vous au tableau de bord Casibase avec le compte administrateur global par d\xe9faut : ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n<b>123</b>\n")),(0,o.kt)("p",null,"Stop and remove containers and volumes (data removed):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose down -v\n")),(0,o.kt)("h3",{id:"option-3--utiliser-directement-limage-standard"},(0,o.kt)("strong",{parentName:"h3"},"Option-3")," : Utiliser directement l'image standard"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"S'il n'est pas pratique de monter des fichiers de configuration dans le conteneur, l'utilisation de variables d'environnement peut \xe9galement \xeatre une solution."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="example"',title:'"example"'},"\ndocker run \\\n  -e driverName=mysql \\\n  -e dataSourceName='user:password@tcp(x.x.x.x:3306)/' \\\n  -p 14000:14000 \\\n  casbin/casibase:latest\n\n"))),(0,o.kt)("p",null,"Cr\xe9ez ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf"),". Vous pouvez le copier depuis ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casibase/casibase/blob/master/conf/app.conf"},"conf/app.conf")," de Casibase. Pour plus de d\xe9tails sur ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf"),", vous pouvez consulter ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation#via-ini-file"},"Via le fichier Ini"),"."),(0,o.kt)("p",null,"Ensuite, ex\xe9cutez"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run  -p 14000:14000 -v /folder/of/app.conf:/conf casbin/casibase:latest\n")),(0,o.kt)("p",null,"En r\xe9sum\xe9, vous devez simplement ",(0,o.kt)("strong",{parentName:"p"},"monter app.conf dans /conf/app.conf")," et d\xe9marrer le conteneur."),(0,o.kt)("p",null,"Visitez ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:14000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:14000"))," dans votre navigateur. Connectez-vous au tableau de bord Casibase avec le compte administrateur global par d\xe9faut : ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n<b>123</b>\n")))}d.isMDXComponent=!0}}]);