"use strict";(self.webpackChunkcasibase_website=self.webpackChunkcasibase_website||[]).push([[5049],{3905:(e,a,n)=>{n.d(a,{Zo:()=>p,kt:()=>k});var t=n(7294);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function i(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=t.createContext({}),c=function(e){var a=t.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):s(s({},a),e)),n},p=function(e){var a=c(e.components);return t.createElement(l.Provider,{value:a},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),u=o,k=d["".concat(l,".").concat(u)]||d[u]||m[u]||r;return n?t.createElement(k,s(s({ref:a},p),{},{components:n})):t.createElement(k,s({ref:a},p))}));function k(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=u;var i={};for(var l in a)hasOwnProperty.call(a,l)&&(i[l]=a[l]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var c=2;c<r;c++)s[c]=n[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4960:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var t=n(7462),o=(n(7294),n(3905));const r={title:"(Opcional) Probar con Docker",description:"Probar Casibase con Docker",keywords:["Casibase","Docker"],authors:["hsluoyz"]},s=void 0,i={unversionedId:"basic/try-with-docker",id:"basic/try-with-docker",title:"(Opcional) Probar con Docker",description:"Probar Casibase con Docker",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/basic/try-with-docker.md",sourceDirName:"basic",slug:"/basic/try-with-docker",permalink:"/es/docs/basic/try-with-docker",draft:!1,editUrl:"https://github.com/casibase/casibase-website/edit/master/docs/basic/try-with-docker.md",tags:[],version:"current",frontMatter:{title:"(Opcional) Probar con Docker",description:"Probar Casibase con Docker",keywords:["Casibase","Docker"],authors:["hsluoyz"]},sidebar:"tutorialSidebar",previous:{title:"Instalaci\xf3n del servidor",permalink:"/es/docs/basic/server-installation"},next:{title:"(Optional) Try with K8s Helm",permalink:"/es/docs/basic/try-with-helm"}},l={},c=[{value:"Requisitos",id:"requisitos",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Sistema operativo",id:"sistema-operativo",level:3},{value:"Docker",id:"docker",level:3},{value:"Obtener las im\xe1genes",id:"obtener-las-im\xe1genes",level:2},{value:"<strong>Opci\xf3n-1</strong>: Usar la base de datos de prueba",id:"opci\xf3n-1-usar-la-base-de-datos-de-prueba",level:3},{value:"<strong>Opci\xf3n-2</strong>: Probar con docker-compose",id:"opci\xf3n-2-probar-con-docker-compose",level:3},{value:"<strong>Opci\xf3n-3</strong>: Usar directamente la imagen est\xe1ndar",id:"opci\xf3n-3-usar-directamente-la-imagen-est\xe1ndar",level:3}],p={toc:c},d="wrapper";function m(e){let{components:a,...n}=e;return(0,o.kt)(d,(0,t.Z)({},p,n,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"requisitos"},"Requisitos"),(0,o.kt)("h3",{id:"hardware"},"Hardware"),(0,o.kt)("p",null,"Si desea construir la imagen Docker usted mismo, aseg\xfarese de que su m\xe1quina tenga al menos ",(0,o.kt)("strong",{parentName:"p"},"2GB")," de memoria. El frontend de Casibase es un proyecto NPM basado en React. La construcci\xf3n del frontend requiere al menos ",(0,o.kt)("strong",{parentName:"p"},"2GB")," de memoria. Una memoria inferior a ",(0,o.kt)("strong",{parentName:"p"},"2GB")," puede provocar fallos en la construcci\xf3n del frontend."),(0,o.kt)("p",null,"Si solo necesita ejecutar la imagen preconstruida, aseg\xfarese de que su m\xe1quina tenga al menos ",(0,o.kt)("strong",{parentName:"p"},"100MB")," de memoria."),(0,o.kt)("h3",{id:"sistema-operativo"},"Sistema operativo"),(0,o.kt)("p",null,"Se admiten todos los sistemas operativos (Linux, Windows y macOS)."),(0,o.kt)("h3",{id:"docker"},"Docker"),(0,o.kt)("p",null,"Puede usar ",(0,o.kt)("strong",{parentName:"p"},"Docker (versi\xf3n docker-engine >= 17.05)")," en Linux o ",(0,o.kt)("strong",{parentName:"p"},"Docker Desktop")," en Windows y macOS."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.docker.com/get-docker/"},"Docker"))),(0,o.kt)("p",null,"Independientemente del sistema operativo, los usuarios deben asegurarse de tener ",(0,o.kt)("strong",{parentName:"p"},"versi\xf3n docker-engine >= 17.05"),". Esto se debe a que utilizamos la caracter\xedstica de construcci\xf3n de m\xfaltiples etapas en docker-compose.yml, que est\xe1 soportada en la versi\xf3n 17.05 y posteriores. Para m\xe1s informaci\xf3n, consulte ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/develop/develop-images/multistage-build/"},"https://docs.docker.com/develop/develop-images/multistage-build/"),"."),(0,o.kt)("p",null,"Si utiliza docker-compose, aseg\xfarese de tener ",(0,o.kt)("strong",{parentName:"p"},"versi\xf3n docker-compose >= 2.2"),". Para usuarios de Linux, tenga en cuenta que docker-compose debe instalarse por separado de docker-engine."),(0,o.kt)("h2",{id:"obtener-las-im\xe1genes"},"Obtener las im\xe1genes"),(0,o.kt)("p",null,"Proporcionamos dos im\xe1genes en DockerHub:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Nombre"),(0,o.kt)("th",{parentName:"tr",align:null},"Descripci\xf3n"),(0,o.kt)("th",{parentName:"tr",align:null},"Recomendaci\xf3n"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://hub.docker.com/r/casbin/casibase-all-in-one"},"casibase-all-in-one")),(0,o.kt)("td",{parentName:"tr",align:null},"La imagen contiene Casibase y la base de datos MySQL"),(0,o.kt)("td",{parentName:"tr",align:null},"Esta imagen ya contiene una base de datos de prueba y es solo para fines de prueba")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://hub.docker.com/r/casbin/casibase"},"casibase")),(0,o.kt)("td",{parentName:"tr",align:null},"La imagen contiene solo Casibase"),(0,o.kt)("td",{parentName:"tr",align:null},"Esta imagen puede conectarse a su propia base de datos y usarse en producci\xf3n")))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"casbin/casibase-all-in-one: esta imagen contiene el ejecutable casibase, una base de datos MySQL y todas las configuraciones necesarias. Est\xe1 dise\xf1ada para nuevos usuarios que desean probar Casibase r\xe1pidamente. Con esta imagen, puede iniciar Casibase inmediatamente con solo uno o dos comandos sin ninguna configuraci\xf3n compleja. Sin embargo, tenga en cuenta que ",(0,o.kt)("strong",{parentName:"li"},"no recomendamos")," usar esta imagen en un entorno de producci\xf3n.")),(0,o.kt)("h3",{id:"opci\xf3n-1-usar-la-base-de-datos-de-prueba"},(0,o.kt)("strong",{parentName:"h3"},"Opci\xf3n-1"),": Usar la base de datos de prueba"),(0,o.kt)("p",null,"Ejecute el contenedor exponiendo el puerto ",(0,o.kt)("inlineCode",{parentName:"p"},"14000")," al host. Si la imagen no existe en el host local, se descargar\xe1 autom\xe1ticamente."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -p 14000:14000 casbin/casibase-all-in-one\n")),(0,o.kt)("p",null,"Visite ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:14000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:14000"))," en su navegador. Inicie sesi\xf3n en el panel de control de Casibase con la cuenta de administrador global predeterminada: ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")),(0,o.kt)("h3",{id:"opci\xf3n-2-probar-con-docker-compose"},(0,o.kt)("strong",{parentName:"h3"},"Opci\xf3n-2"),": Probar con docker-compose"),(0,o.kt)("p",null,"Cree un directorio ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf")," en el mismo nivel de directorio que el archivo ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml"),". Luego, copie ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casibase/casibase/blob/master/conf/app.conf"},"app.conf")," desde Casibase. Para m\xe1s detalles sobre ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf"),", puede consultar ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation#via-ini-file"},"A trav\xe9s del archivo Ini"),"."),(0,o.kt)("p",null,"Below is a minimal but complete ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," example that starts a MySQL database and the Casibase service. It configures Casibase to connect to the database using MySQL. Save this file as ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," (next to a ",(0,o.kt)("inlineCode",{parentName:"p"},"conf")," folder if you want to mount a custom ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'services:\n  db:\n    image: mysql:8.0\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: 123456\n      MYSQL_DATABASE: casibase\n    volumes:\n      - db_data:/var/lib/mysql\n    ports:\n      - "3306:3306" # optional: expose DB to host\n\n  casibase:\n    image: casbin/casibase:latest\n    restart: unless-stopped\n    depends_on:\n      - db\n    environment:\n      # Use MySQL driver and point to the db service (service name = host)\n      - driverName=mysql\n      - dataSourceName=root:123456@tcp(db:3306)/\n    ports:\n      - "14000:14000"\n    volumes:\n      # optional: mount your configuration\n      - ./conf/app.conf:/conf/app.conf\n\nvolumes:\n  db_data:\n')),(0,o.kt)("p",null,"What does the above compose file do:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The Casibase container connects to the database using the Compose service name ",(0,o.kt)("inlineCode",{parentName:"li"},"db")," (i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"db:3306"),"). When both services run in the same Docker network (default for compose), using the service name as host is the simplest and most reliable approach."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"dataSourceName")," above uses the MySQL root account for simplicity. For production use please create a dedicated DB user and a strong password."),(0,o.kt)("li",{parentName:"ul"},"Mounting ",(0,o.kt)("inlineCode",{parentName:"li"},"./conf/app.conf")," into ",(0,o.kt)("inlineCode",{parentName:"li"},"/conf/app.conf")," is optional. If you prefer environment variables, you can remove the mount and rely on the ",(0,o.kt)("inlineCode",{parentName:"li"},"driverName")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"dataSourceName")," variables."),(0,o.kt)("li",{parentName:"ul"},"If both ",(0,o.kt)("inlineCode",{parentName:"li"},"app.conf")," and environment variables are provided, the environment variables take precedence and will override the corresponding settings in app.conf.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Casdoor"),": By default Casibase uses the hosted Casdoor instance at ",(0,o.kt)("inlineCode",{parentName:"p"},"https://door.casdoor.com")," for user authentication. If you need to manage users, applications, or customize the authentication flow, you must deploy your own Casdoor instance and update Casibase's ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf")," (or the equivalent environment variables) to point to your Casdoor server. You can look at ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/docs/basic/server-installation#configure-casdoor"},"Casdoor configuration"))," for more details."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"RUNNING_IN_DOCKER")),": By default ",(0,o.kt)("inlineCode",{parentName:"p"},"RUNNING_IN_DOCKER")," is enabled in docker image. When enabled, Casibase replaces ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost")," with the Docker bridge address (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"host.docker.internal")," or the equivalent bridge hostname) so that the container can reach services running on the host.")),(0,o.kt)("p",null,"Bring up the services:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n")),(0,o.kt)("p",null,"Check logs (follow):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs -f casibase\n")),(0,o.kt)("p",null,"Visite ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:14000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:14000"))," en su navegador. Inicie sesi\xf3n en el panel de control de Casibase con la cuenta de administrador global predeterminada: ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")),(0,o.kt)("p",null,"Stop and remove containers and volumes (data removed):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose down -v\n")),(0,o.kt)("h3",{id:"opci\xf3n-3-usar-directamente-la-imagen-est\xe1ndar"},(0,o.kt)("strong",{parentName:"h3"},"Opci\xf3n-3"),": Usar directamente la imagen est\xe1ndar"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Si no es conveniente montar archivos de configuraci\xf3n en el contenedor, el uso de variables de entorno tambi\xe9n puede ser una soluci\xf3n."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="example"',title:'"example"'},"\ndocker run \\\n  -e driverName=mysql \\\n  -e dataSourceName='user:password@tcp(x.x.x.x:3306)/' \\\n  -p 14000:14000 \\\n  casbin/casibase:latest\n\n"))),(0,o.kt)("p",null,"Cree ",(0,o.kt)("inlineCode",{parentName:"p"},"conf/app.conf"),". Puede copiarlo desde ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casibase/casibase/blob/master/conf/app.conf"},"conf/app.conf")," de Casibase. Para m\xe1s detalles sobre ",(0,o.kt)("inlineCode",{parentName:"p"},"app.conf"),", puede consultar ",(0,o.kt)("a",{parentName:"p",href:"/docs/basic/server-installation#via-ini-file"},"A trav\xe9s del archivo Ini"),"."),(0,o.kt)("p",null,"Luego ejecute"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker run  -p 14000:14000 -v /folder/of/app.conf:/conf casbin/casibase:latest\n")),(0,o.kt)("p",null,"En resumen, solo necesita ",(0,o.kt)("strong",{parentName:"p"},"montar app.conf en /conf/app.conf")," e iniciar el contenedor."),(0,o.kt)("p",null,"Visite ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:14000"},(0,o.kt)("strong",{parentName:"a"},"http://localhost:14000"))," en su navegador. Inicie sesi\xf3n en el panel de control de Casibase con la cuenta de administrador global predeterminada: ",(0,o.kt)("inlineCode",{parentName:"p"},"built-in/admin")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"admin\n123\n")))}m.isMDXComponent=!0}}]);