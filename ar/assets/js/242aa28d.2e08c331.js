"use strict";(self.webpackChunkcasibase_website=self.webpackChunkcasibase_website||[]).push([[3148],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),g=a,h=d["".concat(l,".").concat(g)]||d[g]||p[g]||i;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},83:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(7294);function a(e){return r.createElement("iframe",{src:e.src,width:e.width,height:e.height,style:{borderRadius:"20px"},frameBorder:"0",scrolling:"no"})}a.defaultProps={src:"https://ai.casibase.com",width:"600",height:"700"}},1838:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));n(5771),n(83);const i={title:"Overview",description:"Billing and Usage Tracking",keywords:["Casibase","billing","transactions","token usage","pricing"],authors:["hsluoyz"]},o=void 0,s={unversionedId:"billing/overview",id:"billing/overview",title:"Overview",description:"Billing and Usage Tracking",source:"@site/i18n/ar/docusaurus-plugin-content-docs/current/billing/overview.mdx",sourceDirName:"billing",slug:"/billing/overview",permalink:"/ar/docs/billing/overview",draft:!1,editUrl:"https://github.com/casibase/casibase-website/edit/master/docs/billing/overview.mdx",tags:[],version:"current",frontMatter:{title:"Overview",description:"Billing and Usage Tracking",keywords:["Casibase","billing","transactions","token usage","pricing"],authors:["hsluoyz"]},sidebar:"tutorialSidebar",previous:{title:"Billing & Usage",permalink:"/ar/docs/category/billing--usage"},next:{title:"Transactions",permalink:"/ar/docs/billing/transactions"}},l={},c=[{value:"How It Works",id:"how-it-works",level:2},{value:"Token Tracking",id:"token-tracking",level:2},{value:"Price Calculation",id:"price-calculation",level:2}],u={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Casibase tracks AI token usage and costs automatically through its integration with Casdoor. Every conversation with an AI model generates transaction records that capture consumption details for billing and analytics."),(0,a.kt)("h2",{id:"how-it-works"},"How It Works"),(0,a.kt)("p",null,"When you send a message to an AI model, Casibase validates your balance before generating the response. The system estimates the token cost, checks if you have sufficient funds, and only proceeds if validation succeeds. This prevents situations where you receive an AI response but can't pay for it."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Chat \u2192 Balance Check \u2192 Message \u2192 Transaction")),(0,a.kt)("p",null,"The validation happens in two steps. First, Casibase estimates the cost by asking the model provider how many tokens your question will likely consume. It then validates this estimated cost against your balance using a dry run transaction. If you have insufficient funds, you'll see an error immediately\u2014no AI processing occurs. If validation succeeds, the AI generates your answer and the actual transaction records the real cost."),(0,a.kt)("p",null,"Each chat session maintains a running total of tokens used and costs incurred. Individual messages record their own token consumption, and transactions are created in Casdoor after the AI completes its response. This ensures accurate billing records and enables usage monitoring across your organization."),(0,a.kt)("h2",{id:"token-tracking"},"Token Tracking"),(0,a.kt)("p",null,"Token usage is tracked at multiple levels:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Chats")," display total tokens used and cumulative price for the entire conversation"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Messages")," show tokens consumed for each AI response"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Transactions")," record the billing details in Casdoor for centralized accounting")),(0,a.kt)("p",null,"The model provider field identifies which AI service (OpenAI, Claude, etc.) handled each interaction, making it easy to understand usage patterns across different providers."),(0,a.kt)("h2",{id:"price-calculation"},"Price Calculation"),(0,a.kt)("p",null,"Costs are calculated using proper decimal handling to prevent floating-point precision loss. The system automatically applies the correct pricing model based on the provider and model being used, ensuring accurate billing for all token usage."))}p.isMDXComponent=!0},5771:(e,t,n)=>{n.d(t,{Z:()=>r});const r={gradientborder:"gradientborder_nbzV"}}}]);